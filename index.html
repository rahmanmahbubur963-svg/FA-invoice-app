<!DOCTYPE html>
<html>
<head>
  <title>Friends Association Invoice</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- Barcode Library -->
  <script src="https://cdn.jsdelivr.net/npm/jsbarcode@3.11.5/dist/JsBarcode.all.min.js"></script>

  <!-- PDF Library -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

  <style>
    body {
      font-family: Arial;
      padding: 20px;
      background: #f4f6f9;
    }
    h2 { text-align: center; }

    select, input, button {
      width: 100%;
      padding: 10px;
      margin: 8px 0;
    }

    .invoice-box {
      background: white;
      padding: 15px;
      margin-top: 20px;
      border: 1px solid #ccc;
    }

    button {
      background: #007bff;
      color: white;
      border: none;
    }
  </style>
</head>

<body>

<h2>Friends Association Invoice</h2>

<!-- Member Dropdown -->
<select id="member">
  <option value="">Select Member</option>
  <option value="Rahim - 01711111111">Rahim</option>
  <option value="Karim - 01822222222">Karim</option>
  <option value="Hasan - 01933333333">Hasan</option>
</select>

<input type="number" id="amount" placeholder="Amount (৳)">
<input type="text" id="purpose" placeholder="Purpose">

<button onclick="generateInvoice()">Generate Invoice</button>

<div class="invoice-box" id="invoice"></div>

<script>
let invoiceCount = 1;
let currentInvoiceNo = "";

function generateInvoice() {
  let memberData = document.getElementById("member").value;
  let amount = document.getElementById("amount").value;
  let purpose = document.getElementById("purpose").value;

  if (!memberData) {
    alert("Select Member First");
    return;
  }

  let parts = memberData.split(" - ");
  let name = parts[0];
  let mobile = parts[1];

  currentInvoiceNo = "FA_INV_" + String(invoiceCount).padStart(4, '0');
  let date = new Date().toLocaleDateString();

  document.getElementById("invoice").innerHTML = `
    <h3>Invoice</h3>
    <p><strong>Invoice No:</strong> ${currentInvoiceNo}</p>
    <p><strong>Name:</strong> ${name}</p>
    <p><strong>Mobile:</strong> ${mobile}</p>
    <p><strong>Amount:</strong> ৳ ${amount}</p>
    <p><strong>Purpose:</strong> ${purpose}</p>
    <p><strong>Date:</strong> ${date}</p>
    <svg id="barcode"></svg>
    <br><br>
    <button onclick="downloadPDF()">Download PDF</button>
  `;

  JsBarcode("#barcode", currentInvoiceNo);

  invoiceCount++;
}

async function downloadPDF() {
  const { jsPDF } = window.jspdf;
  const doc = new jsPDF();

  let invoiceText = document.getElementById("invoice").innerText;

  doc.text(invoiceText, 10, 10);
  doc.save(currentInvoiceNo + ".pdf");
}
</script>

</body>
</html>
